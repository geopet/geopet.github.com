
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Creating a Service Using Automator for nvALT Notes Version Control - Thoughts of Geoff</title>
  <meta name="author" content="Geoff Petrie">

  
  <meta name="description" content="Introduction I&#8217;m going to get a pretty nerdy here for a moment. So I dove in and I&#8217;m now using nvALT, Elements and Git for
my note taking &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://geopet.github.com/blog/2011/09/21/creating-a-service-using-automator-for-nvalt-notes-version-control/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Thoughts of Geoff" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2059328-12']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Thoughts of Geoff</a></h1>
  
    <h2>Some writing by Geoff Petrie</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:geopet.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Creating a Service Using Automator for nvALT Notes Version Control</h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-21T08:00:00-06:00" pubdate data-updated="true">Sep 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Introduction</h2>

<p>I&#8217;m going to get a pretty nerdy here for a moment.</p>

<p>So I dove in and I&#8217;m now using <a href="http://brettterpstra.com/project/nvalt/">nvALT</a>, <a href="http://www.secondgearsoftware.com/elements/">Elements</a> and <a href="http://git-scm.com/">Git</a> for
my note taking needs. Aside from a few minor hiccups, which I&#8217;ll address
in a later post, this is really working nicely.</p>

<p>The one thing that I needed when I added nvALT and Elements to my note
taking workflow was the ability to easily continue version control with
Git. Before taking on this new process I was using Git in my notes
directory and I wasn&#8217;t about to lose that option now.</p>

<p>But the ease which nvALT allows me to create new text files, and with
nvALT built to work better with <a href="http://brettterpstra.com/break-up-your-text-documents/">smaller files</a>, I need some way to get my
version control under control.<a href="For">^version</a></p>

<p>Here&#8217;s what my workflow was:</p>

<ol>
<li>Work, notes, work, notes.</li>
<li>Work, notes, work, notes.</li>
<li>Look at the time.</li>
<li><em>Damn! How long has it been since I last did a commit?</em></li>
<li>cd to my notes directory.</li>
<li>Commit my notes to my repository.</li>
</ol>


<p>It wasn&#8217;t really precision based. Plus it had the added detriment of
taking me out of what I was doing to commit my notes.</p>

<p>What I did<a href="My">^original</a> was create a Bash script and then used Automator to create a
Service for it that I also applied a keyboard shortcut to.</p>

<p>If you&#8217;re still with me, here&#8217;s how I did it:</p>

<h2>The Reveal</h2>

<p>First<a href="This">^realfirst</a>, create your Bash script.</p>

<p>I keep all my notes in one directory. This is the way that nvALT and, it
seems, Elements like to work. With some light taxonomy (ala <a href="http://macpowerusers.com/2011/03/mpu-046-workflows-with-merlin-mann-ii/">Merlin Mann
and Mac Power Users</a>) I have a reasonably good system in place. All
my notes are in a <a href="http://db.tt/eOrvceA">Dropbox</a> subdirectory called &#8220;notes.&#8221;</p>

<p>To get this to work I created a Bash script named <code>git_notes.sh</code> and put
this in it:</p>

<pre><code>#!/bin/bash

cd /Users/username/Dropbox/notes/
git add .
git commit -m 'nvALT Service Commit'
echo "* "`date`" nvALT Commit" &gt;&gt; /Users/username/Dropbox/notes/noteCommits`date "+%Y%m%d"`.md
</code></pre>

<p>Now, you&#8217;ll see that this is redundant and probably a lot silly, but
this is what it does.</p>

<ol>
<li>It makes sure that we&#8217;r in my notes directory using the absolute pathname.</li>
<li>It stages only the modified files to the repository.<a href="This">^keypoint</a></li>
<li>It commits those changes and uses a standard message for my Git
log file.</li>
<li>The last line is where it gets a little silly, it appends to another
file in the same Dropbox subdirectory with a message that also gives a
human readable date/time. Why am I doing this? I don&#8217;t know, maybe
someday I&#8217;ll set up something to parse it to get some analytics of when
I do most of my commits for my notes file.</li>
</ol>


<p>But now that we have our Bash script. The rest is <em>trivial</em>.</p>

<p>First, we open <a href="http://support.apple.com/kb/ht2488">Automator</a> and select &#8220;Service&#8221; as our document type
under the &#8220;Choose a type for your document:&#8221;</p>

<p><img src="../images/creating-a-service-01.png" alt="" /></p>

<p>Next, we&#8217;re going to change the &#8220;Service receives&#8221; from the default
&#8220;text&#8221; to &#8220;no input&#8221;. Leave the &#8220;in&#8221; &#8220;any application&#8221; as it is.</p>

<p><img src="../images/creating-a-service-02.png" alt="" /></p>

<p>Penultimately, we click &#8220;Utilities&#8221; under the left-side &#8220;Library&#8221; dropdown and
then drag the &#8220;Run Shell Script&#8221; from the middle column over to the
right side.</p>

<p><img src="../images/creating-a-service-03.png" alt="" /></p>

<p>Lastly, we enter in the location of the script in the workflow. It&#8217;s a
good idea to use the absolute pathname here. In my case it was
<code>/Users/username/Dropbox/notes/git_notes.sh</code>.</p>

<p>Once you save you&#8217;ll have a Service that will be available from any
of your application menus. Click on the Service and it will do a Git
commit of all the changes to that notes directory as well as update the
faux log file we&#8217;ve created for the day.</p>

<p><img src="../images/creating-a-service-04.png" alt="" /></p>

<p>But I don&#8217;t like to use the mouse/trackpad that much. So the final touch
to this is to create a keyboard shortcut in your System Preferences. Go
to <code>Applications &gt; System Preferences &gt; Keyboard</code>. Then choose &#8220;Keyboard
Shortcuts&#8221; and select &#8220;Services&#8221; from the left side. Your new Service
should be at the end of the Services listings. Just click the blank
space at the far end of the window and you should get a text input
field. You can use anything you want for your shortcut, but I chose
control-option-command-shift-s for mine to avoid any chance of a
keyboard conflict.</p>

<p><img src="../images/creating-a-service-05.png" alt="" /></p>

<h2>Conclusion</h2>

<p>So there you have it. A quick and dirty way to make sure that the notes
you&#8217;re producing will be version controlled through Git. As a final
remark, I&#8217;ll say that having version control has already paid off for
me.</p>

<p>I use multiple computers and I made the <em>huge</em> mistake of accidentally
deleting a bunch of files when a prompt popped up and I didn&#8217;t read
exactly what it said. All of a sudden 20-some-odd notes of mine were
<em>gone</em>. But version control to the rescue! I <em>knew</em> I had just committed
to my repo before I had deleted the files and I was able to pull them
back from brink of deletion hell. But this was even easier than it could
have been because I had been using <code>git add .</code> instead of <code>git add -a</code>.
All it meant was that I needed to unstage the deleted files. It was
great and a perfect reason why doing something like this makes sense.</p>

<h2>Post Script</h2>

<p>I should add that the use of a common/standard commit message is bad
practice. The reason I do this, instead of throwing a prompt so that I
can enter in a more detailed message, is that this is supposed to create
a workflow that won&#8217;t interrupt what you&#8217;re in the middle of but give
you the peace of mind that you&#8217;ve got things in a version controlled
environment. This <em>does not</em> prevent you from going to your notes
directory and doing a proper Git commit with a detailed message on what
you&#8217;ve done since your last commit. In fact, at the end of this
paragraph I&#8217;ll be committing properly to say that this draft is
finished. And when I finish my review of the draft I&#8217;ll commit again,
and message that it is ready for posting. After that, I&#8217;ll probably do a
name change to the file (this is the taxonomy thing I mentioned before)
and then do another <em>proper</em> commit.</p>

<p>One last point: You may have noticed that you can easily change the Bash
script to point to any directory you want. Once you have the Service in
place, you can edit your <code>.sh</code> file whenever you please and have a
temporary keyboard shortcut for Git repo commits. I think that&#8217;s kinda
cool.</p>

<p>If you don&#8217;t have one and want to learn how, you can check out my
<a href="http://faceofgeoff.com/post/5383300462/learning-git">post</a> on the subject of Git.</p>

<p>and then have it run through <a href="http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/launchctl.1.html">launchctl</a> on a regular basis.</p>

<p>staging any files for <em>deletion</em> only modification. This means I won&#8217;t
worry about any files going away without my knowing.</p>

<p><em>I originally posted this tutorial on my Tumblr: <a href="http://faceofgeoff.com/post/10480335918/creating-a-service-using-automator-for-nvalt-notes">The Face of Geoff</a></em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Geoff Petrie</span></span>

      








  


<time datetime="2011-09-21T08:00:00-06:00" pubdate data-updated="true">Sep 21<span>st</span>, 2011</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/automator/'>Automator</a>, <a class='category' href='/blog/categories/git/'>Git</a>, <a class='category' href='/blog/categories/osx/'>OSX</a>, <a class='category' href='/blog/categories/service/'>Service</a>, <a class='category' href='/blog/categories/nvalt/'>nvAlt</a>, <a class='category' href='/blog/categories/tips/'>tips</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://geopet.github.com/blog/2011/09/21/creating-a-service-using-automator-for-nvalt-notes-version-control/" data-via="geopet" data-counturl="http://geopet.github.com/blog/2011/09/21/creating-a-service-using-automator-for-nvalt-notes-version-control/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/09/20/temp-text-expander-tip/" title="Previous Post: Temp Text Expander Tip">&laquo; Temp Text Expander Tip</a>
      
      
        <a class="basic-alignment right" href="/blog/2011/10/12/great-tip-on-apple-ids/" title="Next Post: Great Tip on Apple IDs">Great Tip on Apple IDs &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/08/22/adding-a-cname-to-your-octopress-blog/">Adding a CNAME to your Octopress Blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/21/starting-again-with-octopress/">Starting Again With Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/14/on-sparrow-and-google/">On Sparrow and Google</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/14/why-i-love-gweek/">Why I Love Gweek</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/12/great-tip-on-apple-ids/">Great Tip on Apple IDs</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/geopet">@geopet</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'geopet',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("geopet", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/geopet" class="twitter-follow-button" data-show-count="false">Follow @geopet</a>
  
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Geoff Petrie -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
